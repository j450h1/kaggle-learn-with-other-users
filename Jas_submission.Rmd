---
title: "R Notebook"
output: html_notebook
---

```{python}
import pandas as pd
from pathlib import Path
import matplotlib.pyplot as plt #needed to display in Rmarkdown document
import seaborn as sns
```

```{python}
# no need to unzip
file_to_open = Path.cwd() / "train.csv.zip"

df = pd.read_csv(file_to_open)

df.head()
```

# EDA

```{python}
df.columns
```

* Eda

```{python}
df.shape
```


```{python}
df['Cover_Type'].unique() 
```



```{python}
df.groupby('Cover_Type')['Id'].count()
```


```{python}
len(df)/7
```

* Check for missing data

```{python}
df.columns[df.isnull().any()]
```

# Elevation
```{python}
df['Elevation'].hist()
plt.show() #needed to display in Rmarkdown document
```

```{python}
df['Elevation'].plot.box()
plt.show()
```

```{python}
df.boxplot(column=['Elevation'], by=['Cover_Type'])
plt.show()
```

* Seems quite different across classes so a good candidate to be part of the model

```{python}
df.boxplot(column=['Aspect'], by=['Cover_Type'])
plt.show()
```

* Somewhat different, but not as much

```{python}
df.boxplot(column=['Slope'], by=['Cover_Type'])
plt.show()
```

```{python}
df.boxplot(column=['Horizontal_Distance_To_Hydrology'], by=['Cover_Type'])
plt.show()
```

```{python}
df.boxplot(column=['Vertical_Distance_To_Hydrology'], by=['Cover_Type'])
plt.show()
```

* Not very different distributions

```{python}
from statsmodels.graphics.mosaicplot import mosaic
plt.rcParams['font.size'] = 16.0
mosaic(df, ['Soil_Type1', 'Cover_Type']);
```


```{python}
import seaborn as sns
sns.catplot(x="Cover_Type", y="Soil_Type1", hue="Cover_Type", kind="bar", data=df)
plt.show()
```
```{python}
sns.violinplot(x="Cover_Type", y="Soil_Type1", hue="Cover_Type", data=df)
plt.show()
```

```{python}
# toy data
titanic = sns.load_dataset("titanic")
sns.catplot(x="sex", y="survived", hue="class", kind="bar", data=titanic)
plt.show()
```

```{python}
sns.set(style="darkgrid")
ax = sns.countplot(x="Soil_Type1", data=df)
plt.show()
```

```{python}
ax = sns.countplot(x="Cover_Type", hue="Soil_Type1", data=df); ax
plt.show()
```

* Soil_Type seems to be quite different

```{python}
ax = sns.countplot(x="Cover_Type", hue="Wilderness_Area1", data=df); ax
plt.show()
```

# Horizontally

```{python}
ax = sns.countplot(y="Cover_Type", hue="Wilderness_Area1", data=df); ax
plt.show()
```
* below currently only works on mac
```{zsh}
ls
```

# Modeling

* Is there class imbalance?

```{python}
df['Cover_Type'].value_counts()
```

```{python}
# Import KFold
from sklearn.model_selection import KFold

# Create a KFold object
kf = KFold(n_splits=5, shuffle=True, random_state=123)

# Loop through each split
fold = 0
for train_index, test_index in kf.split(df):
    # Obtain training and testing folds
    cv_train, cv_test = df.iloc[train_index], df.iloc[test_index]
    print('Fold: {}'.format(fold))
    print('CV train shape: {}'.format(cv_train.shape))
    print('Cover Type = 5 in CV train: {}\n'.format(sum(cv_train.Cover_Type == 5))) # no need for Stratified since no class imbalance
    fold += 1
```

# Modeling

# Submission #1

* Baseline model - assign each to Cover_Type = 1

* Just to get familiar with the submission process

* Read in test file
```{python}
file_to_open = Path.cwd() / "test.csv.zip"

test = pd.read_csv(file_to_open)

test.head()
```

* 55 columns instead of 56 like in the train set

```{python}
submission1 = test.copy()
```

```{python}
submission1['Cover_Type'] = 1
```

* Write to csv

```{python}
submission1[['Id','Cover_Type']].to_csv('submission1.csv', index=False)
```

* I submitted using command-line tool as such:
```{bash, eval = FALSE}
#kaggle competitions submit favorita-grocery-sales-forecasting -f sample_submission_favorita.csv.7z -m "My submission message"
kaggle competitions submit learn-together -f submission1.csv -m "My first submission for this contest. Just a baseline with all predictions of the 1st class of Cover_Type"
```

```{bash, eval = FALSE}
# to check that the submissions were successfull or not
kaggle competitions submissions learn-together
```


